{% extends 'base.html' %}
{% block currentpage %}


<div class="container-fluid">



  <div class="row">
    <div class="col-lg-12">


      <br>
      <h3>App heartbeat check</h3>
      <div id="heartbeat_div"></div>

    </div>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
  var socket = io.connect('http://' + document.domain + ':' + location.port);

  socket.on('connect', function() {
      var tid = setInterval(heartbeat_ask, 300000);
  });

  function heartbeat_ask() {
    console.log("ask heartbeat");
    socket.emit('heartbeat_ask');
  };

  socket.on('heartbeat_reply', function(msg) {
      console.log(msg);
      $("#heartbeat_div").empty();
      $("#heartbeat_div").append("<h3>"+msg.data+"</h3>");

  });



</script>


{% endblock %}
